(function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],d=0,m=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/login-start-vue/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0f58":function(e,t,n){"use strict";var r=n("c355"),o=n.n(r);o.a},"11be":function(e,t,n){},"49aa":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app",attrs:{id:"app"}},[n("router-view")],1)},a=[],i=(n("5c0b"),n("2877")),s={},l=Object(i["a"])(s,o,a,!1,null,null,null),c=l.exports,u=(n("45fc"),n("8c4f")),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card")},m=[],p=(n("b0c0"),n("d3b7"),n("9f12")),f=n("53fe"),h=n("59ca"),g=n.n(h),v=(n("ea7b"),n("ee68"),n("9e9c"),{apiKey:"AIzaSyAE_4rAo3jQ-nIynUYWbDy1SJOdfCYWOV0",authDomain:"login-start-vue.firebaseapp.com",databaseURL:"https://login-start-vue.firebaseio.com",projectId:"login-start-vue",storageBucket:"login-start-vue.appspot.com",appId:"1:326552357673:web:48812b452a5af34d28c538"}),b=function(){function e(){Object(p["a"])(this,e),g.a.initializeApp(v),this.auth=g.a.auth(),this.db=g.a.firestore(),this.storage=g.a.storage()}return Object(f["a"])(e,[{key:"login",value:function(e,t){var n=this;return new Promise((function(r,o){n.auth.signInWithEmailAndPassword(e,t).then((function(){return r()})).catch((function(e){return o(e)}))}))}},{key:"userExists",value:function(e){var t=this;return new Promise((function(n){t.db.collection("users").doc(e).get().then((function(e){return n(e)}))}))}},{key:"register",value:function(e,t,n){var r=this;return new Promise((function(o,a){r.auth.createUserWithEmailAndPassword(e,t).then((function(){r.db.collection("users").doc(n).set({displayName:n,email:e}).then((function(){r.auth.currentUser.updateProfile({displayName:n}).then((function(){return o()}))})).catch((function(e){return e}))})).catch((function(e){return a(e)}))}))}},{key:"logout",value:function(){return this.auth.signOut()}},{key:"getUser",value:function(){var e=this;return new Promise((function(t,n){e.auth.onAuthStateChanged((function(e){e?t(e):n("No user is signed in.")}))}))}}]),e}(),_=new b,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"c-card"},[n("h3",{staticClass:"c-card__name"},[e._v(" Name: "),n("span",[e._v(e._s(e.user.name))])]),n("h4",{staticClass:"c-card__email"},[e._v(" Email: "),n("span",[e._v(e._s(e.user.email))])]),n("Button",{attrs:{text:"Log out"},on:{onClick:e.handleClick}})],1)},w=[],x=n("2f62"),k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"c-button",on:{click:function(t){return t.preventDefault(),function(t){return e.onButtonClick(t)}(t)}}},[e._v(e._s(e.text))])},C=[],O={name:"Button",props:["text"],methods:{onButtonClick:function(e){this.$emit("onClick")}}},j=O,N=(n("f0bd"),Object(i["a"])(j,k,C,!1,null,null,null)),U=N.exports,E={name:"card",components:{Button:U},methods:{handleClick:function(){_.logout(),this.$store.commit("removeUser"),this.$router.push("login")}},computed:Object(x["b"])(["user"])},S=E,$=(n("0f58"),Object(i["a"])(S,y,w,!1,null,null,null)),P=$.exports,A={name:"home",components:{Card:P},created:function(){var e=this;this.user.name||_.getUser().then((function(t){return e.$store.commit("addUser",{name:t.displayName,email:t.email})}))},computed:Object(x["b"])(["user"])},F=A,B=Object(i["a"])(F,d,m,!1,null,null,null),I=B.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("UserForm",{attrs:{title:"Login with Firebase",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam leo diam, scelerisque a eleifend sed.",type:"login",error:e.error,loading:e.loading},on:{onSubmit:function(t){return e.handleSubmit(t)}}})},T=[],K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"user-form"},[r("form",[r("h2",{staticClass:"user-form__title"},[r("img",{attrs:{src:n("68ac"),width:"35",alt:"Firebase logo"}}),e._v(" "+e._s(e.title)+" ")]),r("p",[e._v(e._s(e.description))]),r("InputField",{attrs:{type:"text",extraClass:"margin-top-20",placeholder:"User name"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),"register"===e.type?r("InputField",{attrs:{type:"text",extraClass:"margin-top-10",placeholder:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}):e._e(),r("InputField",{attrs:{type:"password",extraClass:"margin-top-10",placeholder:"Password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("div",{staticClass:"user-form__footer"},["login"===e.type?r("router-link",{attrs:{to:"/register"}},[e._v("Register")]):e._e(),"login"===e.type?r("Button",{attrs:{text:"Sign in"},on:{onClick:e.handleSubmit}}):e._e(),"register"===e.type?r("router-link",{attrs:{to:"/login"}},[e._v("Login")]):e._e(),"register"===e.type?r("Button",{attrs:{text:"Register"},on:{onClick:e.handleSubmit}}):e._e()],1),e.error.length>0?r("p",{staticClass:"user-form__error"},[e._v(e._s(e.error))]):e._e(),e.loading?r("Loader"):e._e()],1)])},R=[],q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-input-wrap",class:e.extraClass},[e.labelText?n("label",[e._v(e._s(e.labelText))]):e._e(),"checkbox"===e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],staticClass:"c-input-field",attrs:{placeholder:e.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(e.content)?e._i(e.content,null)>-1:e.content},on:{keyup:function(t){return e.handleKeyUp(t)},change:function(t){var n=e.content,r=t.target,o=!!r.checked;if(Array.isArray(n)){var a=null,i=e._i(n,a);r.checked?i<0&&(e.content=n.concat([a])):i>-1&&(e.content=n.slice(0,i).concat(n.slice(i+1)))}else e.content=o}}}):"radio"===e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],staticClass:"c-input-field",attrs:{placeholder:e.placeholder,type:"radio"},domProps:{checked:e._q(e.content,null)},on:{keyup:function(t){return e.handleKeyUp(t)},change:function(t){e.content=null}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],staticClass:"c-input-field",attrs:{placeholder:e.placeholder,type:e.type},domProps:{value:e.content},on:{keyup:function(t){return e.handleKeyUp(t)},input:function(t){t.target.composing||(e.content=t.target.value)}}})])},M=[],W={name:"InputForm",props:["extraClass","type","placeholder","labelText","value"],data:function(){return{content:this.value}},methods:{handleKeyUp:function(e){this.$emit("input",this.content)}}},D=W,J=(n("dba7"),Object(i["a"])(D,q,M,!1,null,null,null)),z=J.exports,Y=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Q=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-loader"},[n("div",{staticClass:"c-loader__item"})])}],V={name:"Loader"},G=V,H=(n("a3f8"),Object(i["a"])(G,Y,Q,!1,null,null,null)),X=H.exports,Z={name:"UserForm",components:{InputField:z,Button:U,Loader:X},props:["title","description","type","submitForm","error","loading"],data:function(){return{userName:"",email:"",password:""}},methods:{handleSubmit:function(){this.$emit("onSubmit",{email:this.email,userName:this.userName,password:this.password})}}},ee=Z,te=(n("c96d"),Object(i["a"])(ee,K,R,!1,null,null,null)),ne=te.exports,re={name:"login",components:{UserForm:ne},data:function(){return{error:"",loading:!1}},methods:{handleSubmit:function(e){var t=this;this.error="",0!==e.userName.length&&0!==e.password.length?(this.loading=!0,_.userExists(e.userName).then((function(n){n.exists?_.login(n.data().email,e.password).then((function(){t.$store.commit("addUser",{name:e.userName,email:n.data().email}),t.loading=!1,t.$router.push("/")})).catch((function(e){t.error=e.message,t.loading=!1})):(t.error="The user not exists",t.loading=!1)}))):this.error="Complete all fields"}}},oe=re,ae=Object(i["a"])(oe,L,T,!1,null,null,null),ie=ae.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("UserForm",{attrs:{title:"Register with Firebase",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam leo diam, scelerisque a eleifend sed.",type:"register",error:e.error,loading:e.loading},on:{onSubmit:function(t){return e.handleSubmit(t)}}})},le=[],ce={name:"register",components:{UserForm:ne},data:function(){return{error:"",loading:!1}},methods:{handleSubmit:function(e){var t=this;this.error="",0!==e.userName.length&&0!==e.password.length&&0!==e.email.length?(this.loading=!0,_.userExists(e.userName).then((function(n){n.exists?t.error="the user already exists":_.register(e.email,e.password,e.userName).then((function(){t.$store.commit("addUser",{name:e.userName,email:e.email}),t.loading=!1,t.$router.push("/")})).catch((function(e){t.error=e.message,t.loading=!1}))}))):this.error="Complete all fields"}}},ue=ce,de=Object(i["a"])(ue,se,le,!1,null,null,null),me=de.exports;r["a"].use(u["a"]);var pe=[{path:"/",name:"home",component:I,meta:{isAuth:!0}},{path:"/login",name:"login",component:ie},{path:"/register",name:"Register",component:me}],fe=new u["a"]({mode:"history",base:"/login-start-vue/",routes:pe});fe.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.isAuth}))&&!_.auth.currentUser?n("/login"):n()}));var he=fe;r["a"].use(x["a"]);var ge=new x["a"].Store({state:{user:{name:null,email:null}},mutations:{addUser:function(e,t){e.user={name:t.name,email:t.email}},removeUser:function(e){e.user={name:null,email:null}}}}),ve=n("9483");Object(ve["a"])("".concat("/login-start-vue/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,_.auth.onAuthStateChanged((function(){new r["a"]({router:he,store:ge,render:function(e){return e(c)}}).$mount("#app")}))},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),o=n.n(r);o.a},"68ac":function(e,t,n){e.exports=n.p+"img/logo-firebase.ce753b28.png"},"76ae":function(e,t,n){},"9c0c":function(e,t,n){},a3f8:function(e,t,n){"use strict";var r=n("49aa"),o=n.n(r);o.a},a589:function(e,t,n){},c355:function(e,t,n){},c96d:function(e,t,n){"use strict";var r=n("a589"),o=n.n(r);o.a},dba7:function(e,t,n){"use strict";var r=n("11be"),o=n.n(r);o.a},f0bd:function(e,t,n){"use strict";var r=n("76ae"),o=n.n(r);o.a}});
//# sourceMappingURL=app.9b184158.js.map