(function(e){function t(t){for(var r,i,s=t[0],u=t[1],c=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/login-start-vue/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"11be":function(e,t,n){},"49aa":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app",attrs:{id:"app"}},[n("router-view")],1)},a=[],i=(n("5c0b"),n("2877")),s={},u=Object(i["a"])(s,o,a,!1,null,null,null),c=u.exports,l=(n("45fc"),n("8c4f")),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Button",{attrs:{text:"Log Out"},on:{onClick:e.handleClick}})},p=[],f=(n("d3b7"),n("9f12")),m=n("53fe"),h=n("59ca"),g=n.n(h),v=(n("ea7b"),n("ee68"),n("9e9c"),{apiKey:"AIzaSyAE_4rAo3jQ-nIynUYWbDy1SJOdfCYWOV0",authDomain:"login-start-vue.firebaseapp.com",databaseURL:"https://login-start-vue.firebaseio.com",projectId:"login-start-vue",storageBucket:"login-start-vue.appspot.com",appId:"1:326552357673:web:48812b452a5af34d28c538"}),b=function(){function e(){Object(f["a"])(this,e),g.a.initializeApp(v),this.auth=g.a.auth(),this.db=g.a.firestore(),this.storage=g.a.storage()}return Object(m["a"])(e,[{key:"login",value:function(e,t){var n=this;return new Promise((function(r,o){n.auth.signInWithEmailAndPassword(e,t).then((function(){return r()})).catch((function(e){return o(e)}))}))}},{key:"userExists",value:function(e){var t=this;return new Promise((function(n){t.db.collection("users").doc(e).get().then((function(e){return n(e)}))}))}},{key:"register",value:function(e,t,n){var r=this;return new Promise((function(o,a){r.auth.createUserWithEmailAndPassword(e,t).then((function(){r.db.collection("users").doc(n).set({displayName:n,email:e}).then((function(){r.auth.currentUser.updateProfile({displayName:n}).then((function(){return o()}))})).catch((function(e){return e}))})).catch((function(e){return a(e)}))}))}},{key:"logout",value:function(){return this.auth.signOut()}},{key:"getUser",value:function(){var e=this;return new Promise((function(t,n){e.auth.onAuthStateChanged((function(e){e?t(e):n("No user is signed in.")}))}))}}]),e}(),y=new b,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"c-button",on:{click:function(t){return t.preventDefault(),function(t){return e.onButtonClick(t)}(t)}}},[e._v(e._s(e.text))])},w=[],x={name:"Button",props:["text"],methods:{onButtonClick:function(e){this.$emit("onClick")}}},k=x,C=(n("f0bd"),Object(i["a"])(k,_,w,!1,null,null,null)),O=C.exports,j={name:"home",components:{Button:O},methods:{handleClick:function(){y.logout(),this.$router.push("login")}}},S=j,E=Object(i["a"])(S,d,p,!1,null,null,null),A=E.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("UserForm",{attrs:{title:"Login with Firebase",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam leo diam, scelerisque a eleifend sed.",type:"login",error:e.error,loading:e.loading},on:{onSubmit:function(t){return e.handleSubmit(t)}}})},P=[],U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"user-form"},[r("form",[r("h2",{staticClass:"user-form__title"},[r("img",{attrs:{src:n("68ac"),width:"35",alt:"Firebase logo"}}),e._v(" "+e._s(e.title)+" ")]),r("p",[e._v(e._s(e.description))]),r("InputField",{attrs:{type:"text",extraClass:"margin-top-20",placeholder:"User name"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),"register"===e.type?r("InputField",{attrs:{type:"text",extraClass:"margin-top-10",placeholder:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}):e._e(),r("InputField",{attrs:{type:"password",extraClass:"margin-top-10",placeholder:"Password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("div",{staticClass:"user-form__footer"},["login"===e.type?r("router-link",{attrs:{to:"/register"}},[e._v("Register")]):e._e(),"login"===e.type?r("Button",{attrs:{text:"Sign in"},on:{onClick:e.handleSubmit}}):e._e(),"register"===e.type?r("router-link",{attrs:{to:"/login"}},[e._v("Login")]):e._e(),"register"===e.type?r("Button",{attrs:{text:"Register"},on:{onClick:e.handleSubmit}}):e._e()],1),e.error.length>0?r("p",{staticClass:"user-form__error"},[e._v(e._s(e.error))]):e._e(),e.loading?r("Loader"):e._e()],1)])},$=[],F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-input-wrap",class:e.extraClass},[e.labelText?n("label",[e._v(e._s(e.labelText))]):e._e(),"checkbox"===e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],staticClass:"c-input-field",attrs:{placeholder:e.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(e.content)?e._i(e.content,null)>-1:e.content},on:{keyup:function(t){return e.handleKeyUp(t)},change:function(t){var n=e.content,r=t.target,o=!!r.checked;if(Array.isArray(n)){var a=null,i=e._i(n,a);r.checked?i<0&&(e.content=n.concat([a])):i>-1&&(e.content=n.slice(0,i).concat(n.slice(i+1)))}else e.content=o}}}):"radio"===e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],staticClass:"c-input-field",attrs:{placeholder:e.placeholder,type:"radio"},domProps:{checked:e._q(e.content,null)},on:{keyup:function(t){return e.handleKeyUp(t)},change:function(t){e.content=null}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],staticClass:"c-input-field",attrs:{placeholder:e.placeholder,type:e.type},domProps:{value:e.content},on:{keyup:function(t){return e.handleKeyUp(t)},input:function(t){t.target.composing||(e.content=t.target.value)}}})])},B=[],I={name:"InputForm",props:["extraClass","type","placeholder","labelText","value"],data:function(){return{content:this.value}},methods:{handleKeyUp:function(e){this.$emit("input",this.content)}}},L=I,T=(n("dba7"),Object(i["a"])(L,F,B,!1,null,null,null)),K=T.exports,R=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},q=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-loader"},[n("div",{staticClass:"c-loader__item"})])}],M={name:"Loader"},W=M,D=(n("a3f8"),Object(i["a"])(W,R,q,!1,null,null,null)),J=D.exports,z={name:"UserForm",components:{InputField:K,Button:O,Loader:J},props:["title","description","type","submitForm","error","loading"],data:function(){return{userName:"",email:"",password:""}},methods:{handleSubmit:function(){this.$emit("onSubmit",{email:this.email,userName:this.userName,password:this.password})}}},Y=z,Q=(n("c96d"),Object(i["a"])(Y,U,$,!1,null,null,null)),V=Q.exports,G={name:"login",components:{UserForm:V},data:function(){return{error:"",loading:!1}},methods:{handleSubmit:function(e){var t=this;this.loading=!0,this.error="",y.userExists(e.userName).then((function(n){n.exists?y.login(n.data().email,e.password).then((function(){t.loading=!1,t.$store.commit("setAuth",!0),t.$router.push("/")})).catch((function(e){t.loading=!1,t.error=e.message})):(t.error="The user not exists",t.loading=!1)}))}}},H=G,X=Object(i["a"])(H,N,P,!1,null,null,null),Z=X.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("UserForm",{attrs:{title:"Register with Firebase",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam leo diam, scelerisque a eleifend sed.",type:"register",error:e.error,loading:e.loading},on:{onSubmit:function(t){return e.handleSubmit(t)}}})},te=[],ne={name:"register",components:{UserForm:V},data:function(){return{error:"",loading:!1}},methods:{handleSubmit:function(e){var t=this;this.loading=!0,y.userExists(e.userName).then((function(n){n.exists?t.error="the user already exists":y.register(e.email,e.password,e.userName).then((function(){t.loading=!1,t.$router.push("/")})).catch((function(e){t.loading=!1,t.error=e.message}))}))}}},re=ne,oe=Object(i["a"])(re,ee,te,!1,null,null,null),ae=oe.exports;r["a"].use(l["a"]);var ie=[{path:"/",name:"home",component:A,meta:{isAuth:!0}},{path:"/login",name:"login",component:Z},{path:"/register",name:"Register",component:ae}],se=new l["a"]({mode:"history",base:"/login-start-vue/",routes:ie});se.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.isAuth}))&&!y.auth.currentUser?n("/login"):n()}));var ue=se,ce=(n("b0c0"),n("2f62"));r["a"].use(ce["a"]);var le=new ce["a"].Store({state:{user:{name:null,email:null}},mutations:{addUser:function(e,t){e.user={name:t.name,email:t.email}},setAuth:function(e,t){e.auth=t}}}),de=n("9483");Object(de["a"])("".concat("/login-start-vue/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,y.auth.onAuthStateChanged((function(){new r["a"]({router:ue,store:le,render:function(e){return e(c)}}).$mount("#app")}))},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),o=n.n(r);o.a},"68ac":function(e,t,n){e.exports=n.p+"img/logo-firebase.ce753b28.png"},"76ae":function(e,t,n){},"9c0c":function(e,t,n){},a3f8:function(e,t,n){"use strict";var r=n("49aa"),o=n.n(r);o.a},a589:function(e,t,n){},c96d:function(e,t,n){"use strict";var r=n("a589"),o=n.n(r);o.a},dba7:function(e,t,n){"use strict";var r=n("11be"),o=n.n(r);o.a},f0bd:function(e,t,n){"use strict";var r=n("76ae"),o=n.n(r);o.a}});
//# sourceMappingURL=app.5abffd58.js.map